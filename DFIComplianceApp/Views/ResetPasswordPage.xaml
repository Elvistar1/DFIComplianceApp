<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:DFIComplianceApp.ViewModels"
             xmlns:conv="clr-namespace:DFIComplianceApp.Converters"
             x:Class="DFIComplianceApp.Views.ResetPasswordPage"
             x:DataType="vm:ResetPasswordViewModel"
             Title="Reset Password"
             BackgroundColor="#f7f7f7">

    <!-- ✅ Resources must be wrapped in <ContentPage.Resources> -->
    <ContentPage.Resources>
        <ResourceDictionary>
            <conv:InverseBoolConverter x:Key="InverseBoolConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <VerticalStackLayout Padding="30" Spacing="16">

        <Label Text="Enter a new password:"
               FontAttributes="Bold"
               FontSize="18"
               TextColor="Black" />

        <Entry Placeholder="New password"
               IsPassword="True"
               Text="{Binding NewPassword}" />

        <Entry Placeholder="Confirm password"
               IsPassword="True"
               Text="{Binding ConfirmPassword}" />

        <!-- Spinner while waiting -->
        <ActivityIndicator IsRunning="{Binding IsBusy}"
                           IsVisible="{Binding IsBusy}"
                           Color="Gray"
                           HeightRequest="30"
                           WidthRequest="30"
                           HorizontalOptions="Center" />

        <Button Text="🔒 Reset Password"
                Command="{Binding SaveCommand}"
                IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}" />

    </VerticalStackLayout>
</ContentPage>
