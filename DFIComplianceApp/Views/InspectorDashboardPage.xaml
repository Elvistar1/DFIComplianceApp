<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:conv="clr-namespace:DFIComplianceApp.Converters"
    xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
    x:Class="DFIComplianceApp.Views.InspectorDashboardPage"
    x:Name="page"
    Title="Inspector Dashboard"
    BackgroundColor="#fafafa">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Style x:Key="CardButton" TargetType="Button">
                <Setter Property="CornerRadius" Value="14"/>
                <Setter Property="Padding" Value="18,14"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="BackgroundColor" Value="#1976D2"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="LineBreakMode" Value="WordWrap"/>
                <Setter Property="HorizontalOptions" Value="FillAndExpand"/>
                <Setter Property="VerticalOptions" Value="FillAndExpand"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView Padding="0,0,0,20">
        <VerticalStackLayout Padding="12" Spacing="18">

            <Label Text="{Binding Greeting}"
                   FontAttributes="Bold"
                   FontSize="24"
                   TextColor="#37474F"
                   HorizontalOptions="Center"/>
            <!-- Year Filter -->
            <Picker x:Name="YearPicker"
            Title="Select Year"
            SelectedIndexChanged="OnYearChanged"
            TextColor="Black">
            </Picker>

            <lvc:CartesianChart
    Series="{Binding InspectorStatsSeries}"
    HeightRequest="300"
    LegendPosition="Right"
    BackgroundColor="White"
    Margin="0,20,0,0" />


            <Grid ColumnSpacing="12" RowSpacing="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.5*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Row="0" Grid.Column="0"
                        Text="ðŸ“ Conduct\nInspection"
                        Style="{StaticResource CardButton}"
                        BackgroundColor="#1976D2"
                        Clicked="OnConductInspectionClicked"/>

                <Button Grid.Row="0" Grid.Column="1"
                        Text="â° Upcoming"
                        Style="{StaticResource CardButton}"
                        Clicked="OnUpcomingClicked"/>

                <Button Grid.Row="1" Grid.Column="0"
                        Text="ðŸ“œ My History"
                        Style="{StaticResource CardButton}"
                        BackgroundColor="#455A64"
                        Clicked="OnHistoryClicked"/>

                <Button Grid.Row="1" Grid.Column="1"
                        Text="â¬‡ Export\nAll"
                        Style="{StaticResource CardButton}"
                        BackgroundColor="#6D4C41"
                        Clicked="OnExportAllClicked"/>

                <Button Grid.Row="2" Grid.Column="0"
                        Text="âž• Register\nCompany"
                        Style="{StaticResource CardButton}"
                        BackgroundColor="#388E3C"
                        Clicked="OnRegisterCompanyClicked"/>

                <Button Grid.Row="2" Grid.Column="1"
                        Text="â™»ï¸ Renew\nCompany"
                        Style="{StaticResource CardButton}"
                        BackgroundColor="#00796B"
                        Clicked="OnRenewCompanyClicked"/>

                <Frame Grid.Row="3" Grid.ColumnSpan="2"
                       BackgroundColor="#fff3cd"
                       BorderColor="#ffeeba"
                       Padding="12"
                       CornerRadius="12">
                    <HorizontalStackLayout Spacing="10">
                       
                        <Label Text="ðŸ””  Inspections in next 7â€¯days:"
                               VerticalOptions="Center"/>
                        <Label Text="{Binding DueSoonCount}"
                               FontAttributes="Bold"
                               TextColor="{Binding ReminderColour}"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                </Frame>

                <Button Text="ðŸšª Logout"
        Grid.Row="4"
        Grid.ColumnSpan="2"
        FontAttributes="Bold"
        BackgroundColor="#B71C1C"
        TextColor="White"
        CornerRadius="12"
        Padding="16"
        Clicked="OnLogoutClicked"/>

                <Button Grid.Row="2" Grid.ColumnSpan="2"
        Text="ðŸ§  AI Oversight"
        Style="{StaticResource CardButton}"
        BackgroundColor="#512DA8"
        Clicked="OnAIOversightClicked"/>

            </Grid>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
