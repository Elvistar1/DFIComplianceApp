<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:DFIComplianceApp.Converters"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
             x:Class="DFIComplianceApp.Views.SecretaryDashboardPage"
             Title="Secretary"
             BackgroundColor="#f5f5f5">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="24">

            <!-- Header -->
            <Label Text="ðŸ“‘ Secretary Dashboard"
                   FontSize="28"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="#37474F"/>

            <!-- Stats Section -->
            <Frame CornerRadius="14"
                   Padding="18"
                   BackgroundColor="White"
                   HasShadow="True">
                <VerticalStackLayout Spacing="14">

                    <!-- Chart with fixed axis bindings -->
                    <lvc:CartesianChart x:Name="MyChart"
                     Series="{Binding Series}" 
                    XAxes="{Binding XAxes}"
                    YAxes="{Binding YAxes}"
                    HeightRequest="200"
                    LegendPosition="Right"
                    BackgroundColor="White" />
                    <!-- Stats Row -->
                    <Grid ColumnDefinitions="*,*,*,*" RowDefinitions="Auto,Auto" Padding="0,8,0,0">
                        <!-- Values -->
                        <Label Text="{Binding TotalCompanies}" FontSize="18" HorizontalOptions="Center" FontAttributes="Bold"/>
                        <Label Text="{Binding TotalInspections}" FontSize="18" HorizontalOptions="Center" FontAttributes="Bold" Grid.Column="1"/>
                        <Label Text="{Binding UpcomingRenewals}" FontSize="18" HorizontalOptions="Center" FontAttributes="Bold" Grid.Column="2"/>
                        <Label Text="{Binding OverdueInspections}" FontSize="18" HorizontalOptions="Center" FontAttributes="Bold" Grid.Column="3"
                               TextColor="{Binding OverdueInspections, Converter={StaticResource OverdueColorConverter}}"/>

                        <!-- Labels -->
                        <Label Text="Companies" Grid.Row="1" Grid.Column="0" FontSize="12" TextColor="Gray" HorizontalOptions="Center"/>
                        <Label Text="Inspections" Grid.Row="1" Grid.Column="1" FontSize="12" TextColor="Gray" HorizontalOptions="Center"/>
                        <Label Text="Renewals" Grid.Row="1" Grid.Column="2" FontSize="12" TextColor="Gray" HorizontalOptions="Center"/>
                        <Label Text="Overdue" Grid.Row="1" Grid.Column="3" FontSize="12" TextColor="Gray" HorizontalOptions="Center"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Actions Section -->
            <Frame CornerRadius="14"
                   Padding="14"
                   BackgroundColor="White"
                   HasShadow="True">
                <Grid ColumnDefinitions="*,*"
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                      RowSpacing="14"
                      ColumnSpacing="14">

                    <!-- Row 1 -->
                    <Button Text="ðŸ—“  Schedule Inspection"
                            Clicked="OnScheduleClicked"
                            Style="{StaticResource DashTile}" />

                    <Button Text="ðŸ“  Inspection History"
                            Clicked="OnNotesClicked"
                            Style="{StaticResource DashTile}"
                            Grid.Column="1" />

                    <!-- Row 2 -->
                    <Button Text="ðŸ­  View Companies / ðŸ”„  Renew Company"
                            Clicked="OnCompaniesClicked"
                            Style="{StaticResource DashTile}"
                            Grid.Row="1" />

                    <Button Text="âž•  Register Company"
                            Clicked="OnRegisterCompanyClicked"
                            Style="{StaticResource DashTileGreen}"
                            Grid.Row="1" Grid.Column="1" />

                    

                    <Button Text="ðŸ“†  Upcoming Renewals"
                            Clicked="OnUpcomingRenewalsClicked"
                            Style="{StaticResource DashTileBlue}"
                             Grid.Row="2" />

                    <!-- Row 4 -->
                    <Button Text="ðŸ“œ  Renewal History"
                            Clicked="OnRenewalHistoryClicked"
                            Style="{StaticResource DashTileBlue}"
                            Grid.Row="2" Grid.Column="1"/>

                    



                </Grid>
            </Frame>
            

            <!-- Logout -->
            <Button Text="ðŸšª Logout"
                    Clicked="OnLogoutClicked"
                    BackgroundColor="#D32F2F"
                    TextColor="White"
                    CornerRadius="14"
                    HeightRequest="60"
                    FontAttributes="Bold"
                    FontSize="16"/>
        </VerticalStackLayout>
    </ScrollView>

    <!-- Styles -->
    <ContentPage.Resources>
        <ResourceDictionary>

            <!-- Converter for overdue color -->
            <local:OverdueColorConverter x:Key="OverdueColorConverter" />

            <Style x:Key="DashTile" TargetType="Button">
                <Setter Property="HeightRequest" Value="80"/>
                <Setter Property="CornerRadius" Value="14"/>
                <Setter Property="BackgroundColor" Value="#607D8B"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Padding" Value="10,0"/>
                <Setter Property="HorizontalOptions" Value="FillAndExpand"/>
            </Style>

            <Style TargetType="Button" x:Key="DashTileGreen" BasedOn="{StaticResource DashTile}">
                <Setter Property="BackgroundColor" Value="#4CAF50"/>
            </Style>

            <Style TargetType="Button" x:Key="DashTileBlue" BasedOn="{StaticResource DashTile}">
                <Setter Property="BackgroundColor" Value="#1976D2"/>
            </Style>

            <Style TargetType="Button" x:Key="DashTileRed" BasedOn="{StaticResource DashTile}">
                <Setter Property="BackgroundColor" Value="#F44336"/>
            </Style>

            <Style TargetType="Button" x:Key="DashTileOrange" BasedOn="{StaticResource DashTile}">
                <Setter Property="BackgroundColor" Value="#FF9800"/>
            </Style>

        </ResourceDictionary>
    </ContentPage.Resources>
</ContentPage>
